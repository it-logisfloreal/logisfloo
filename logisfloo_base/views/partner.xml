<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record model="ir.ui.view" id="logisfloo_partner_form_view">
		<field name="name">logisfloo.partner.form.view</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="point_of_sale.view_partner_property_form" />
		<field name="arch" type="xml">
            <field name="name" position="replace">
                <field name="name" class="oe_read_only" />
                <field name="first_name" placeholder="First Name"
                    class="oe_edit_only"
                    attrs="{'invisible' : [('company_type', '=', 'company')]}" />
                <field name="last_name" placeholder="Last Name"
                    class="oe_edit_only" default_focus="1" />
                <field name="able_to_modify_slate_number" invisible="1" />
				<field name="slate_number" attrs="{'readonly' : [('able_to_modify_slate_number','=',False)]}"/>
            </field>

            <button name="toggle_active" position="attributes">
                <attribute name="groups" />
            </button>

			<xpath expr="/form/sheet/div/button[last()]" position="after">
				<button class="oe_stat_button" type="object" icon="fa-credit-card" name="show_slate_move_lines">  
					<div class="o_form_field o_stat_info">
						<span class="o_stat_value">
							<field name="slate_balance" widget="monetary" options="{'currency_field': 'currency_id'}" modifiers="{'readonly': true}"/>
						</span>
						<span class="o_stat_text">
							Slate Balance
						</span>
					</div>
				</button>
			</xpath>
			
			<field name="website" position="after">
				<field name="subscription_date"/>
				<field name="subscription_event"/>
				<field name="add_to_mailing_list"/>
				<field name="floreal_logis_membership"/>
			</field>
			
			<field name="property_account_payable_id" position="after">
				<field name="property_account_slate_id" can_create="true" can_write="true" modifiers="{'required': true}"/>
			</field>
			
			<!-- remove unused fields and buttons -->
			<field name="function" position="replace"/>
			<field name="fax" position="replace"/>
		</field>
	</record>
	
	<record id="logisfloo_partner_template_tree_view" model="ir.ui.view">
        <field name="name">logisfloo.partner.template.tree.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
        	<field name="display_name" position="after">
        		<field name="slate_number"/>
        		<field name="slate_balance"/>
        	</field>
        </field>
    </record>
	
	<record model="ir.ui.view" id="Logisfloo_partner_search_view">
        <field name="name">logisfloo.partner.search.view</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter" />
        <field name="arch" type="xml">
        	<field name="name" position="after">
        		<field name="slate_number"/>
        	</field>
        	
        	<group name="group_by" position="replace">
        		<group expand="0" name="group_by" string="Group By">
					<filter name="slate_number" string="Slate Number" context="{'group_by': 'slate_number'}"/>
				</group>
			</group>
        	
        </field>
    </record>
    
</odoo>
