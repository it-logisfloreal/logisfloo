<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

	<t t-extend="Chrome">
		<t t-jquery=".pos-logo" t-operation="replace">
			<img class="pos-logo" src="/logisfloo_base/static/src/img/logisfloo_logo.png" />  
		</t>
	</t>

    <t t-extend="ActionpadWidget">
        <t t-jquery=".actionpad" t-operation="replace">
        	<t t-if="widget.pos.get_client()">
		        <div class="actionpad">
		            <button t-attf-class='button set-customer #{ ( widget.pos.get_client() and widget.pos.get_client().name.length > 10) ? "decentered" : "" }' >
		                <i class='fa fa-user' /> 
	                    <t t-esc="widget.pos.get_client().name" />
						<div class='customer-information-pay'>
			                <br />
			                Balance:
			                <t t-if="widget.pos.get_client().slate_balance &gt; 0">
			                	<span class='customer-balance' style="color:black"/>
			                </t>
			                <t t-if="widget.pos.get_client().slate_balance &lt;= 0">
			                	<span class='customer-balance' style="color:red"/>
			                </t>
			                €
			                <br />
			                <span class='customer-delegate1' />
			                <br />
			                <span class='customer-delegate2' />
		                </div>
		            </button>
		            <!--
		            	TODO: 
		            		If (last balance - purchased amount) is less than threshold then disable payment and 
		            		replace it with an error mesasge in box of the same size as the pay button.
		            		Threshold should ideally be defined as a system parameter.  
		            		
		            		Use something like this:
		            		<t t-set="slate_balance" t-value="widget.pos.get_client().balance"/> -> need to update get_client() to return the balance
		            		<t t-esc="slate_balance - purchased amount"/>
		            -->
		            <button class='button pay'>
		                <div class='pay-circle'>
		                    <i class='fa fa-chevron-right' /> 
		                </div>
		                Payment
		            </button>
		        </div>
        	</t>
            <t t-if="!widget.pos.get_client()">
            	<div class="actionpad">
		            <button t-attf-class='button set-customer decentered' >
		                <i class='fa fa-user' /> 
		                    Select a customer
		            </button>
		            <!--  
		            	Add the same button a second time to 'close the box' and have nice looking layout.
		            	Both buttons trigger the same action.
		            	
		            	TODO: 
		            		update CSS to only use one button of the right size to align with the numpad and 'close the box' 
		            -->
		            <button t-attf-class='button set-customer decentered' >
		                <i class='fa fa-user' /> 
		                    Select a customer
		            </button>
            	</div>
            </t>              
        </t>
    </t>

	<t t-extend="PaymentScreenWidget">
		<t t-jquery=".payment-numpad" t-operation="replace"/>
		<t t-jquery=".payment-buttons" t-operation="replace"/>
		<t t-jquery=".customer-information" t-operation="replace">
			<div class="customer-information">
				<span class='customer-name' />
				<br />
				<br />
				Balance:
				<t t-if="widget.pos.get_client().slate_balance &gt; 0">
					<span class='customer-balance' style="color:black"/>
				</t>
				<t t-if="widget.pos.get_client().slate_balance &lt;= 0">
					<span class='customer-balance' style="color:red"/>
				</t>
				€
				<br />
				<span class='customer-delegate1' />
				<br />
				<span class='customer-delegate2' />
				<br />
				<span class='customer-delegate3' />
				<br />
			</div>
		</t>
	</t>

    <t t-extend="ClientLine">
    	<t t-jquery=".client-line" t-operation="replace">
	        <tr class='client-line' t-att-data-id='partner.id'>
	            <td><t t-esc='partner.slate_number' /></td>
	            <td><t t-esc='partner.name' /></td>
	            <td><t t-esc='partner.address' /></td>
	            <td><t t-esc='partner.phone or partner.mobile or ""' /></td>
	        </tr>
        </t>
    </t>

    <t t-extend="ClientListScreenWidget">
	    <t t-jquery=".client-list" t-operation="replace">
	        <table class='client-list'>
	            <thead>
	                <tr>
	                    <th>Slate Number</th>
	                    <th>Name</th>
	                    <th>Address</th>
	                    <th>Phone</th>
	                </tr>
	            </thead>
	            <tbody class='client-list-contents'>
	            </tbody>
	        </table>
	    </t>
    </t>
</templates>


